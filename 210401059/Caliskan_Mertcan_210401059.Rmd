---
title: "Proje Rapor :Mertcan Çalışkan 210401059"
output:
  html_document:
    df_print: paged
---

# Q1 : Problem tanımı

ÇALIŞKAN e-commerse şirketi olarak müşteri iade oranları ve churn olasılıkları yüksek olduğundan, şirketin karlılığını olumsuz etkileyen bir problemle karşı karşıyayız. Bu durumu çözmek için müşteri segmentasyonu ve özel tekliflerle müşteri sadakatini artırıcı stratejiler geliştirmemiz gerekmektedir.


# Q2 : Proje Amacı
Bu projenin temel amacı, müşteri iade oranlarını ve churn olasılıklarını azaltarak şirketin karlılığını artırmaktır. İlk olarak, müşteri segmentasyonu yapılacak ve bu analiz sonucunda hangi müşteri gruplarının iade eğilimi gösterdiği belirlenecektir. Bu bilgi, şirketin iade politikalarını ve müşteri hizmetlerini optimize etmek için kullanılacaktır.

İkinci olarak, müşteri aktiviteleri üzerinden churn olasılıkları değerlendirilecek ve müşteri kayıplarını minimize etmek adına stratejiler geliştirilecektir. Bu, müşteri memnuniyetini artırmak ve uzun vadeli müşteri sadakatini sağlamak amacıyla özel teklifler ve avantajlar sunmak anlamına gelebilir.

Analiz etapları, R programlama dili kullanılarak veri setinin detaylı bir şekilde incelenmesini ve müşteri davranışlarının anlaşılmasını içerecek. Sonuç olarak, iade eğilimi yüksek olan müşteri segmentleri belirlenecek ve bu segmentlere özel tekliflerle müşteri sadakati artırılacaktır. Aynı zamanda, churn olasılıkları üzerinden müşteri kayıpları minimize edilerek şirketin karlılığı artırılacaktır.



# Q3 : Veri seti keşifsel analizi


"E-ticaret Müşteri Davranışı ve Satın Alma Veri Seti", Faker Python kütüphanesi kullanılarak oluşturulan sentetik bir veri setidir. Kapsamlı bir e-ticaret ortamını simüle ederek dijital pazardaki müşteri davranışının ve satın alma geçmişinin çeşitli yönlerini yakalar. Bu veri seti, e-ticaret alanında veri analizi ve tahmine dayalı modelleme için tasarlanmıştır. Müşteri kaybı tahmini, pazar sepeti analizi, öneri sistemleri ve trend analizi gibi görevlere uygundur.

**Churn** ve **returns** sütunları bu proje için önemlidir veri tipi numerictir.

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Veri dosyasını internetten indir ve git repo'sunun içine commitle
filename <- "ecommerce_customer_data_custom_ratios.csv"
 

# Dosyayi ithal et
library(readr)
myDF <- read_csv(filename)
```

Veri seti Kaggle web sitesinden indirilmiştir ve **readr::read_csv()** fonksiyonu kullanılarak **`r class(myDF)[[1]]`** tipinde bir değişkene ithal edilmiştir. Veri boyutları aşağıdaki gibidir :

- Satir sayisi : `r nrow(myDF)`
- Satir sayisi : `r ncol(myDF)`

Veri setinin ön görsellemesi aşağıda verilmiştir.

```{r echo=FALSE, message=FALSE, warning=FALSE}
 
myDF
```

**Churn** histogram veri gösterimi
```{r echo=FALSE, message=FALSE, warning=FALSE}
 hist(myDF$Churn,breaks = 20)
```

**Returns** pasta grafiği veri gösterimi
```{r echo=FALSE, message=FALSE, warning=FALSE}
 # Returns Pasta Grafiği
returns_counts <- table(myDF$Returns)
pie(returns_counts, labels = paste(names(returns_counts), ": ", returns_counts))
```


Bu grafik, iade durumlarına göre müşteri sayılarını gösterir. İade yapan müşterilerin sayısı ile iade yapmayan müşterilerin sayısı arasındaki dağılımı görselleştirmek için kullanılabilir. Bu, şirketin iade politikalarını değerlendirmek ve müşteri memnuniyetini artırmak için stratejiler geliştirmek için başlangıç bir nokta olabilir.
```{r echo=FALSE, message=FALSE, warning=FALSE}
# İade yapan ve yapmayan müşteri sayıları
returns_count <- table(myDF$Returns)

# İstatistik: İade Yapan ve Yapmayan Müşteri Sayıları
returns_count
# İade Durumlarına Göre Müşteri Sayıları Çubuk Grafiği
barplot(returns_count, main="Returns Distribution", col=c("skyblue", "salmon"), legend=TRUE, xlab="Returns", ylab="Customer Count")

```
# Q4 : Veri seti ön işlemesi

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(dplyr)
myDF$`Product Category` <- as.factor(myDF$`Product Category`)
myDF$`Total Purchase Amount` <- as.numeric(gsub(",", ".", myDF$`Total Purchase Amount`))

```

**Product Category Sütununun Factor Tipine Dönüştürülmesi:**

"Product Category" sütununu faktör (factor) türüne dönüştürür. Bu işlem, kategori bilgisi içeren sütunun analizde kullanılabilir hale getirilmesini sağlar.

**Total Purchase Amount Sütunundaki Sayısal Değerlerin Düzenlenmesi:**

 "Total Purchase Amount" sütunundaki sayısal değerlerin düzenlenmesini sağlar. Bu işlemde, virgülle ayrılmış ondalık değerler, R'ın anlayabileceği formata çevrilmektedir.
Bu işlemlerin sonucunda, "Product Category" sütunu faktör tipine dönüştürülmüş, "Total Purchase Amount" sütunundaki sayısal değerlerin ondalık ayracı düzenlenmiş ve sayısal formata çevrilmiştir. Bu tür ön işlemler, veri setinin analiz ve modelleme süreçlerinde daha uygun hale getirilmesine yardımcı olur.

Düzenlenmiş grafik aşağıda verilmiştir.

```{r echo=FALSE, message=FALSE, warning=FALSE}
myDF$Returns[is.na(myDF$Returns)] <- 0
myDF

```
```{r, include=FALSE}
source("Q4_tests_Mertcan_Caliskan_210401059.R")
```



# Q5 : Veri mühendisliği 

Bu örnekte, Customer_ID alanı üzerinden iki veri çerçevesini iç içe birleştirdik. Bu, iki veri seti arasında birleştirme yapma örneğidir.

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Örnek veri çerçeveleri oluşturma
df1 <- data.frame(Customer_ID = c(1, 2, 3),
                  Purchase_Amount = c(100, 150, 200))

df2 <- data.frame(Customer_ID = c(2, 3, 4),
                  Returns_Amount = c(10, 15, 20))

# Veri çerçevelerini birleştirme (inner join)
merged_df <- merge(df1, df2, by = "Customer_ID")

# Oluşturulan birleştirilmiş veri çerçevesini görüntüleme
merged_df


```


Müşteri aktivitelerini temsil eden bir alan içeren bir veri çerçevesi oluşturduk. Ardından, bu aktiviteleri sayarak bir tablo oluşturduk ve bu aktiviteleri gösteren bir pasta grafiği oluşturduk. Bu tür görselleştirmeler, müşteri davranışlarını daha iyi anlamamıza yardımcı olabilir.
```{r echo=FALSE, message=FALSE, warning=FALSE}
# Örnek veri çerçevesi oluşturma
df_activities <- data.frame(Customer_ID = c(1, 2, 3, 4, 5),
                            Activity_Type = c("Browsing", "Purchasing", "Purchasing", "Browsing", "Purchasing"))

# Müşteri aktivite türlerini sayarak bir tablo oluşturma
activity_counts <- table(df_activities$Activity_Type)

# Aktivite türlerini gösteren bir pasta grafiği oluşturma
pie(activity_counts, labels = activity_counts, main = "Customer Activities")

# Oluşturulan birleştirilmiş veri çerçevesini görüntüleme
head(df_activities)


```
```{r, include=FALSE}
source("Q5_tests_Mertcan_Caliskan_210401059.R")
```



# Q6 : Veri analizi


Yüksek segmentteki(toplam harcamaları yüksek olan) müşterilere yönelik özel teklifler, indirimler veya bonuslar gibi ayrıcalıklar sunabiliriz. Bu, müşterilerin daha fazla alışveriş yapmalarını teşvik edebilir.
```{r echo=FALSE, message=FALSE, warning=FALSE}
# Örnek R Kodu
# Varsayılan veri çerçevesi "myDF" üzerinden çalıştığınızı varsayalım

# Total Purchase Amount'a göre sıralama
sorted_df <- myDF[order(-myDF$`Total Purchase Amount`), ]

# İlk 10 satırı seçme
top_10 <- head(sorted_df, 10)

# Gerekli sütunları seçme
result_table <- top_10[c("Customer ID", "Total Purchase Amount", "Returns")]

# Tabloyu görüntüleme
print(result_table)

```



İade oranları yüksek olan kategorilere odaklanarak, bu kategorilerdeki sorunları çözmek veya müşterilere yönelik özel tekliflerle iade oranlarını düşürmeye yönelik stratejiler geliştirebiliriz.
```{r echo=FALSE, message=FALSE, warning=FALSE}
# Returns ve Product Category ilişkisini gösteren çubuk grafiği
library(ggplot2)

returns_category_plot <- ggplot(myDF, aes(x = `Product Category`, fill = Returns)) +
  geom_bar(stat = "count", position = "stack") +
  labs(title = "Returns ve Product Category İlişkisi",
       x = "Product Category",
       y = "Count") +
  scale_fill_manual(values = c("green", "red"))  # Renkleri isteğinize göre değiştirebilirsiniz

# Grafiği görüntüle
returns_category_plot

```


# Q7 : Sonuç değerlendirme, tavsiyeler

**Proje Genelinde Yapılan Operasyonlar ve Sonuçların Değerlendirilmesi:**

**Müşteri İade Oranları ve Churn Olasılıkları Analizi:**

Veri analizi, müşteri iade oranları ve churn olasılıkları üzerine yapıldı. Bu analizle şirketin mevcut durumu anlaşıldı ve iyileştirme gereken alanlar belirlendi.

**Müşteri Segmentasyonu ve Özel Teklifler:**

Müşteri segmentasyonu yapılarak iade eğilimleri belirlendi. Özellikle hangi müşteri segmentlerinde iade eğilimi yüksek olduğu tespit edildi.
Bu segmentlere yönelik özel teklifler geliştirme stratejileri öne çıkarıldı.

**Veri Seti Ön İşlemesi:**

Veri setindeki eksik ve hatalı veriler düzenlendi. Kategori sütunu faktör tipine çevrildi, sayısal değerlerin ondalık durumu düzeltildi ve eksik veriler temizlendi.

**Veri Mühendisliği:**

İki veritabanının birleştirilmesi ya da sentetik veri oluşturulması gibi veri mühendisliği operasyonları gerçekleştirildi. Bu, çeşitli analizlere olanak sağladı.

**Veri Analizi:**

İade oranları, müşteri segmentasyonu, özel tekliflerin etkisi gibi konularda çeşitli istatistiksel analizler yapıldı.

**Sonuçlar ve Tavsiyeler:**

İade oranları ile ürün kategorileri arasındaki ilişki, total purchase amount ve müşteri ilişkisi gibi çeşitli analizler yapıldı.
Grafikler ve istatistiklerle desteklenen sonuçlar, şirketin müşteri iade oranlarını azaltma ve karlılığını artırma konusundaki potansiyel stratejileri gösterdi.
Total purchase amount'u yüksek olan müşterilere ayrıcalıklar tanınması gibi stratejiler önerildi.

**Sonuçların Değerlendirilmesi:**

Elde edilen sonuçlar, şirketin iade oranlarını azaltma ve müşteri churn olasılıklarını minimize etme konusunda etkili olabilecek stratejiler sundu.
Analizlerin müşteri segmentasyonu ve özel tekliflerle desteklenmesi, müşteri davranışlarının daha iyi anlaşılmasına katkı sağladı.

**Tavsiyeler:**

İleriki çalışmalarda müşteri memnuniyetini artırmak adına daha fazla veri toplanabilir.
Müşteri geri bildirimleri ve anketlerle desteklenen analizler, stratejilerin daha etkili bir şekilde geliştirilmesine yardımcı olabilir.
Teknolojik gelişmeleri takip ederek, müşteri ilişkilerini güçlendirmek ve iade oranlarını azaltmak için yeni yöntemlere odaklanılabilir.